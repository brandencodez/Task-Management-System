<div class="login-container">
  <button class="home-btn" (click)="goHome()">‚Üê Home</button>
  
  <h2>Employee Login</h2>

  <!-- Password Setup Form (First Time) -->
  @if (showPasswordSetup) {
    <p>Set your password for future logins:</p>
    <form (ngSubmit)="setPassword()" #setupForm="ngForm">
      <div class="form-group">
        <label for="newPassword">Create Password *</label>
        <input
          type="password"
          id="newPassword"
          [(ngModel)]="newPassword"
          name="newPassword"
          required
          minlength="6"
          placeholder="At least 6 characters"
        />
      </div>
      
      <div class="form-group">
        <label for="confirmPassword">Confirm Password *</label>
        <input
          type="password"
          id="confirmPassword"
          [(ngModel)]="confirmPassword"
          name="confirmPassword"
          required
          placeholder="Confirm your password"
        />
      </div>
      
      @if (errorMessage) {
        <div class="error">{{ errorMessage }}</div>
      }
      
      <button type="submit" class="btn-primary">Save Password</button>
    </form>
  } 
  <!-- Regular Login Form -->
  @else {
    <form (ngSubmit)="login()" #loginForm="ngForm">
      <div class="form-group">
        <label for="username">Full Name *</label>
        <input
          type="text"
          id="username"
          [(ngModel)]="username"
          name="username"
          required
          placeholder=""
        />
      </div>
      
      <div class="form-group">
        <label for="password">Password *</label>
        <input
          type="password"
          id="password"
          [(ngModel)]="password"
          name="password"
          required
          placeholder="Enter your password"
        />
      </div>
      
      @if (errorMessage) {
        <div class="error">{{ errorMessage }}</div>
      }
      
      <button type="submit" class="btn-primary">Login</button>
    </form>
    <p class="note">First time? Enter your name and click "Login" to set password.</p>
  }
</div>