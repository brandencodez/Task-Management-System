<div class="auth-container">
  <div class="login-card">
    <!-- Home button positioned correctly -->
    <a href="/authpage" class="home-btn ">‚Üê Back</a>
    
    <div class="login-header">
      <h2>Employee Portal</h2>
      <p>Secure access to your projects and tasks</p>
    </div>

    @if (showPasswordSetup) {
      <form (ngSubmit)="setPassword()" #setupForm="ngForm" class="login-form">
        <div class="form-group">
          <label class="form-label" for="newPassword">Create Password *</label>
          <div class="password-input">
            <input
              [type]="showNewPassword ? 'text' : 'password'"
              id="newPassword"
              [(ngModel)]="newPassword"
              name="newPassword"
              required
              minlength="6"
              class="form-control"
              placeholder="At least 6 characters"
            />
            <button type="button" class="password-toggle" (click)="showNewPassword = !showNewPassword">
              {{ showNewPassword ? 'Hide' : 'Show' }}
            </button>
          </div>
        </div>
        
        <div class="form-group">
          <label class="form-label" for="confirmPassword">Confirm Password *</label>
          <div class="password-input">
            <input
              [type]="showConfirmPassword ? 'text' : 'password'"
              id="confirmPassword"
              [(ngModel)]="confirmPassword"
              name="confirmPassword"
              required
              class="form-control"
              placeholder="Confirm your password"
            />
            <button type="button" class="password-toggle" (click)="showConfirmPassword = !showConfirmPassword">
              {{ showConfirmPassword ? 'Hide' : 'Show' }}
            </button>
          </div>
        </div>
        
        @if (errorMessage) {
          <div class="error">{{ errorMessage }}</div>
        }
        
        <button type="submit" class="btn btn-primary w-full">Save Password</button>
      </form>
    } @else {
      <form (ngSubmit)="login()" #loginForm="ngForm" class="login-form">
        <div class="form-group">
          <label class="form-label" for="username">Full Name *</label>
          <input
            type="text"
            id="username"
            [(ngModel)]="username"
            name="username"
            required
            class="form-control"
            placeholder="Enter your full name"
          />
        </div>
        
        <div class="form-group">
          <label class="form-label" for="password">Password *</label>
          <div class="password-input">
            <input
              [type]="showPassword ? 'text' : 'password'"
              id="password"
              [(ngModel)]="password"
              name="password"
              required
              class="form-control"
              placeholder="Enter your password"
            />
            <button type="button" class="password-toggle" (click)="showPassword = !showPassword">
              {{ showPassword ? 'Hide' : 'Show' }}
            </button>
          </div>
        </div>
        
        @if (errorMessage) {
          <div class="error">{{ errorMessage }}</div>
        }
        
        <button type="submit" class="btn btn-primary w-full">Sign In</button>
      </form>
      
      <p class="note">
        First time user? Enter your name and click "Sign In" to set up your password.
      </p>
    }
  </div>
</div>