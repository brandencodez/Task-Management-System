<div class="user-projects-container">
  <div class="header-section">
    <div class="welcome-header">
      <h2>Welcome {{ currentUser || 'User' }}!</h2>
      <p class="subtitle">Your assigned projects and tasks</p>
    </div>
    <button (click)="logout()" class="btn-logout">Logout</button>
  </div>
  
  @if (userDepartment) {
    <div class="department-badge">
      <span class="dept-label">Department:</span>
      <span class="dept-name">{{ userDepartment }}</span>
    </div>
  }

  @if (projects.length > 0) {
    <div class="projects-header">
      <h3>Your Projects</h3>
      <span class="project-count">{{ projects.length }} project{{ projects.length !== 1 ? 's' : '' }}</span>
    </div>
    
    <div class="projects-grid">
      @for (project of projects; track project.id) {
        <div class="project-card">
          <div class="project-header">
            <h4>{{ project.name }}</h4>
            <span class="status-badge {{ project.status.toLowerCase() }}">{{ project.status }}</span>
          </div>
          
          <div class="project-details">
            <p><strong>Type:</strong> {{ project.projectType || 'Not specified' }}</p>
            <div class="client-details">
              <p><strong>Company:</strong> {{ project.clientDetails.companyName || 'Not specified' }}</p>
              @for (contact of project.clientDetails.contacts; track $index) {
                <p><strong>Contact {{ $index + 1 }}:</strong> {{ contact.name }}
                  @if (contact.email || contact.phone) {
                    ({{ contact.email || contact.phone }})
                  }
                </p>
              }
              @if (project.clientDetails.address) {
                <p><strong>Address:</strong> {{ project.clientDetails.address }}</p>
              }
            </div>
            <p><strong>Duration:</strong> {{ project.startDate }} to {{ project.finishDate }}</p>
            <p><strong>Brief:</strong> {{ project.projectBrief || 'No brief provided' }}</p>
          </div>
        </div>
      }
    </div>
  } @else {
    <div class="no-projects">
      @if (userDepartment) {
        <div class="empty-state">
          <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M20 21v-2a4 4 0 0 0-5.656-3.656L12 14m-4 6v-2a4 4 0 0 1 5.656-3.656L12 14m-4 6v-2a4 4 0 0 1 5.656-3.656L12 14"></path>
            <circle cx="12" cy="7" r="4"></circle>
          </svg>
          <h3>No Projects Assigned</h3>
          <p>No projects assigned to your department ({{ userDepartment }}).</p>
        </div>
      } @else {
        <div class="empty-state">
          <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
            <line x1="8" y1="12" x2="16" y2="12"></line>
            <line x1="12" y1="8" x2="12" y2="16"></line>
          </svg>
          <h3>Employee Record Not Found</h3>
          <p>No employee record found for your account.</p>
        </div>
      }
    </div>
  }
</div>