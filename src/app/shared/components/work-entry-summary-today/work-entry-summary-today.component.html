<div class="work-entry-summary-today">

  <!-- ================= MAIN SUMMARY CARD ================= -->
  <div class="summary-card">

    <!-- ===== Header ===== -->
    <div class="summary-header">
      <h2>ðŸ“Š Today's Work Summary</h2>
    </div>

    <!-- ===== Statistics Cards ===== -->
    <div class="stats-grid">

      <!-- Submitted Card -->
      <div class="stat-card submitted">
        <div class="stat-icon"></div>
        <div class="stat-info">
          <div class="stat-number">
            {{ stats.submittedToday }}
          </div>
          <div class="stat-title">
            Submitted Today
          </div>
        </div>
      </div>

      <!-- Pending Card -->
      <div class="stat-card pending">
        <div class="stat-icon"></div>
        <div class="stat-info">
          <div class="stat-number">
            {{ stats.notSubmittedToday }}
          </div>
          <div class="stat-title">
            Pending
          </div>
        </div>
      </div>

      <!-- Total Active Card -->
      <div class="stat-card total">
        <div class="stat-icon"></div>
        <div class="stat-info">
          <div class="stat-number">
            {{ stats.totalActiveEmployees }}
          </div>
          <div class="stat-title">
            Total Active
          </div>
        </div>
      </div>

    </div>

    <!-- ================= EMPLOYEE SECTIONS ================= -->
    <div class="employees-wrapper">

      <!-- ===== Submitted Employees ===== -->
      <div class="employee-column">
        <h4>
           Submitted ({{ stats.employeesWithEntries.length }})
        </h4>

        <div
          *ngIf="stats.employeesWithEntries.length === 0"
          class="empty-state"
        >
          No work entries submitted yet
        </div>

        <div
          *ngFor="let employee of stats.employeesWithEntries"
          class="employee-card submitted-card clickable"
          (click)="openWorkEntriesModal(employee.name)"
        >
          <span class="employee-name">
            {{ employee.name }}
          </span>
          <span class="department-badge">
            {{ employee.department }}
          </span>
        </div>
      </div>

      <!-- ===== Pending Employees ===== -->
      <div class="employee-column">
        <h4>
           Pending ({{ stats.employeesWithoutEntries.length }})
        </h4>

        <div
          *ngIf="stats.employeesWithoutEntries.length === 0"
          class="empty-state"
        >
           All employees have submitted!
        </div>

        <div
          *ngFor="let employee of stats.employeesWithoutEntries"
          class="employee-card pending-card"
        >
          <span class="employee-name">
            {{ employee.name }}
          </span>
          <span class="department-badge">
            {{ employee.department }}
          </span>
        </div>
      </div>

    </div>

  </div>

  <!-- ===== MODAL ===== -->
  <div *ngIf="showModal" class="modal-overlay" (click)="closeModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h3>Work Entries: {{ selectedEmployeeName }}</h3>
        <button class="close-btn" (click)="closeModal()">Ã—</button>
      </div>
      <div class="modal-body">
        <div *ngIf="selectedWorkEntries.length === 0" class="empty-modal">
          No work entries found.
        </div>
        
        <div *ngFor="let entry of selectedWorkEntries" class="work-entry-item">
          <div class="entry-header">
            <strong>{{ entry.project }}</strong>
            <span class="entry-date">{{ formatDate(entry.date) }}</span>
          </div>
          <p class="entry-desc">{{ entry.description }}</p>
          
          <!-- Multiple Attachments Display -->
          <div *ngIf="entry.attachments?.length" class="attachments-grid">
            <div class="attachments-header">
              ðŸ“Ž Attachments ({{ entry.attachments?.length || 0 }})
            </div>
            <div class="attachments-list">
              <div class="attachment-item" *ngFor="let att of entry.attachments">
                <div class="attachment-icon">
                  {{ getFileIcon(att.mime_type) }}
                </div>
                <div class="attachment-info">
                  <div class="attachment-name">{{ att.original_name }}</div>
                  <div class="attachment-meta">
                    {{ workEntryService.formatFileSize(att.file_size) }} â€¢ 
                    {{ att.mime_type.split('/')[1] | uppercase }}
                  </div>
                </div>
                <a 
                  [href]="getAttachmentUrl(att.filename)" 
                  target="_blank"
                  rel="noopener noreferrer"
                  class="attachment-view-btn"
                  title="View/Open"
                >
                  View
                </a>
              </div>
            </div>
          </div>

          <div *ngIf="!entry.attachments?.length" class="no-attachments">
            No attachments
          </div>
        </div>
      </div>
    </div>
  </div>

</div>